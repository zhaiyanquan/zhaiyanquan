
<!-- saved from url=(0076)http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html -->
<html xmlns="http://www.w3.org/1999/xhtml" class="translated-ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>CASE</title>
    
    <script type="text/javascript" src="./CASE_files/jquery.min.js">
    </script>
    <script type="text/javascript" src="./CASE_files/jquery.snippet.js">
    </script>
    <script type="text/javascript" src="./CASE_files/main.js">
    </script>
    <link type="text/css" href="./CASE_files/index.css" rel="Stylesheet">
    <link type="text/css" href="./CASE_files/jquery.snippet.css" rel="Stylesheet">
  <link type="text/css" rel="stylesheet" charset="UTF-8" href="./CASE_files/translateelement.css"></head>
  <body>
    <div class="source_style_case">
      <a name="page_top_case" id="top_anchor">
      </a><a id="link_top" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#page_top_case"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最佳</font></font></a>
      <h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NSD SHELL DAY04</font></font></h1>
      <ol class="index">
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#case1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">案例1：使用正则表达式</font></font></a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#case2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">案例2：sed的基本用法</font></font></a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#case3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">案例3：使用SED修改系统配置</font></font></a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#case4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">案例4：SED多行文本处理</font></font></a>
        </li>
      </ol>
      <a name="case1">
      </a>
      <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1案例1：使用正则表达式</font></font></h2>
      <h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1问题</font></font></h3>
      <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本案例要求熟悉正则表达式的编写，完成以下任务：</font></font></p>
      <ul class="list">
        <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">利用egrep的工具练习正则表达式的基本用法
</font></font></li>
      </ul>
      <h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2方案</font></font></h3>
      <div class="table">
        <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表-1基本正则列表</font></font></p>
        <img src="./CASE_files/table001.png">
      </div>
      <div class="table">
        <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表-1扩展正则列表</font></font></p>
        <img src="./CASE_files/table002.png">
      </div>
      <h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3步骤</font></font></h3>
      <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实现此案例需要按照如下步骤进行。</font></font></p>
      <p class="number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">步骤一：正则表达式匹配练习</font></font></p>
      <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）典型的应用场合：grep的，egrep的检索文本行</font></font></p>
      <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grep的命令不带-E选项时，支持基本正则匹配模式。比如“词”关键词检索，“^字”匹配以字开头的行“字$”匹配以字结尾的行......等等。</font></font></p>
      <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出以“R”开头的用户记录：</font></font></p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> root @svr5 </font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~]</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> #grep </font></font><span class="sh_string"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'^ r' </font></font></span> <span class="sh_regexp"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc /</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> passwd</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">root </font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> x </font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></span><span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 </font></font></span><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></span><span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 </font></font></span><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> root </font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></span><span class="sh_regexp"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ root：/ </font></font></span><span class="sh_normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bin </font></font></span><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bash</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rpc </font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> x </font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></span><span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32 </font></font></span><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></span><span class="sh_number"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32 </font></font></span><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Portmapper RPC用户</font></font><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></span><span class="sh_regexp"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/：/ </font></font></span><span class="sh_normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sbin </font></font></span><span class="sh_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nologin</font></font></li><li>rpcuser<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">29</span><span class="sh_symbol">:</span><span class="sh_number">29</span><span class="sh_symbol">:</span>RPC Service User<span class="sh_symbol">:</span><span class="sh_regexp">/var/</span><span class="sh_normal">lib</span><span class="sh_symbol">/</span>nfs<span class="sh_symbol">:</span><span class="sh_regexp">/sbin/</span>nologin</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# grep '^r' /etc/passwd<font></font>
root:x:0:0:root:/root:/bin/bash<font></font>
rpc:x:32:32:Portmapper RPC user:/:/sbin/nologin<font></font>
rpcuser:x:29:29:RPC Service User:/var/lib/nfs:/sbin/nologin<font></font>
</pre></div></div>
      <p>输出以“localhost”结尾的行：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># grep <span class="sh_string">'localhost$'</span> <span class="sh_regexp">/etc/</span>hosts</li><li><span class="sh_number">127.0.0.1</span>               localhost<span class="sh_symbol">.</span>localdomain localhost</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# grep 'localhost$' /etc/hosts<font></font>
127.0.0.1               localhost.localdomain localhost<font></font>
</pre></div></div>
      <p>若希望在grep检索式同时组合多个条件，比如输出以“root”或者以“daemon”开头的行：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># grep <span class="sh_string">'^root|^daemon'</span> <span class="sh_regexp">/etc/</span>passwd  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//搜索无结果</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span>#</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# grep '^root|^daemon' /etc/passwd  		//搜索无结果<font></font>
[root@svr5 ~]#<font></font>
<font></font>
</pre></div></div>
      <p>而若若使用grep -E或egrep命令，可支持扩展正则匹配模式，能够自动识别 |、{} 等扩展正则表达式中的特殊字符，用起来更加方便，比如：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># grep <span class="sh_symbol">-</span>E <span class="sh_string">'^(root|daemon)'</span> <span class="sh_regexp">/etc/</span>passwd</li><li>root<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">0</span><span class="sh_symbol">:</span><span class="sh_number">0</span><span class="sh_symbol">:</span>root<span class="sh_symbol">:</span><span class="sh_regexp">/root:/</span><span class="sh_normal">bin</span><span class="sh_symbol">/</span>bash</li><li>daemon<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">2</span><span class="sh_symbol">:</span><span class="sh_number">2</span><span class="sh_symbol">:</span>daemon<span class="sh_symbol">:</span><span class="sh_regexp">/sbin:/</span><span class="sh_normal">sbin</span><span class="sh_symbol">/</span>nologin</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# grep -E '^(root|daemon)' /etc/passwd<font></font>
root:x:0:0:root:/root:/bin/bash<font></font>
daemon:x:2:2:daemon:/sbin:/sbin/nologin<font></font>
</pre></div></div>
      <p>或者</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'^(root|daemon)'</span> <span class="sh_regexp">/etc/</span>passwd</li><li>root<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">0</span><span class="sh_symbol">:</span><span class="sh_number">0</span><span class="sh_symbol">:</span>root<span class="sh_symbol">:</span><span class="sh_regexp">/root:/</span><span class="sh_normal">bin</span><span class="sh_symbol">/</span>bash</li><li>daemon<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">2</span><span class="sh_symbol">:</span><span class="sh_number">2</span><span class="sh_symbol">:</span>daemon<span class="sh_symbol">:</span><span class="sh_regexp">/sbin:/</span><span class="sh_normal">sbin</span><span class="sh_symbol">/</span>nologin</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep '^(root|daemon)' /etc/passwd<font></font>
root:x:0:0:root:/root:/bin/bash<font></font>
daemon:x:2:2:daemon:/sbin:/sbin/nologin<font></font>
</pre></div></div>
      <p>使用grep -E 与 使用egrep命令完全等效，推荐使用后者，特别是涉及到复杂的正则表达式的时候。</p>
      <p>2）grep、egrep命令的-q选项</p>
      <p>选项 -q 表示 quiet（静默）的意思，结合此选项可以只做检索而并不输出，通常在脚本内用来识别查找的目标是否存在，通过返回状态 $? 来判断，这样可以忽略无关的文本信息，简化脚本输出。</p>
      <p>比如，检查/etc/hosts文件内是否存在192.168.4.4的映射记录，如果存在则显示“YES”，否则输出“NO”，一般会执行：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># grep <span class="sh_string">'^192.168.4.4'</span> <span class="sh_regexp">/etc/</span>hosts <span class="sh_symbol">&amp;&amp;</span> echo <span class="sh_string">"YES"</span> <span class="sh_symbol">||</span> echo <span class="sh_string">"NO"</span></li><li><span class="sh_number">192.168.4.4</span>     svr5<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>com svr5</li><li>YES</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# grep '^192.168.4.4' /etc/hosts &amp;&amp; echo "YES" || echo "NO"<font></font>
192.168.4.4     svr5.tarena.com svr5<font></font>
YES<font></font>
</pre></div></div>
      <p>这样grep的输出信息和脚本判断后的提示混杂在一起，用户不易辨别，所以可以改成以下操作：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># grep <span class="sh_symbol">-</span>q <span class="sh_string">'^192.168.4.4'</span> <span class="sh_regexp">/etc/</span>hosts <span class="sh_symbol">&amp;&amp;</span> echo <span class="sh_string">"YES"</span> <span class="sh_symbol">||</span> echo <span class="sh_string">"NO"</span></li><li>YES</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# grep -q '^192.168.4.4' /etc/hosts &amp;&amp; echo "YES" || echo "NO"<font></font>
YES<font></font>
</pre></div></div>
      <p>是不是清爽多了，从上述结果也可以看到，使用 -q 选项的效果与使用 &amp;&gt; /dev/null的效果类似。</p>
      <p>3）基本元字符 ^、$ —— 匹配行首、行尾</p>
      <p>输出注释的配置行（以#开头的行）：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'^#'</span> <span class="sh_regexp">/etc/i</span>nittab</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep '^#' /etc/inittab
</pre></div></div>
      <p>统计本地用户中登录Shell为“/sbin/nologin”的用户个数：</p>
      <p>提示：-m10仅在文件的前10行中过滤，后面的行不再过滤。</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_symbol">-</span>m10 <span class="sh_string">'/sbin/nologin$'</span> <span class="sh_regexp">/etc/</span>passwd  <span class="sh_comment">//先确认匹配正确</span></li><li>bin<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">1</span><span class="sh_symbol">:</span><span class="sh_number">1</span><span class="sh_symbol">:</span>bin<span class="sh_symbol">:</span><span class="sh_regexp">/bin:/</span><span class="sh_normal">sbin</span><span class="sh_symbol">/</span>nologin</li><li>daemon<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">2</span><span class="sh_symbol">:</span><span class="sh_number">2</span><span class="sh_symbol">:</span>daemon<span class="sh_symbol">:</span><span class="sh_regexp">/sbin:/</span><span class="sh_normal">sbin</span><span class="sh_symbol">/</span>nologin</li><li>adm<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">3</span><span class="sh_symbol">:</span><span class="sh_number">4</span><span class="sh_symbol">:</span>adm<span class="sh_symbol">:</span><span class="sh_regexp">/var/</span>adm<span class="sh_symbol">:</span><span class="sh_regexp">/sbin/</span>nologin</li><li>lp<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">4</span><span class="sh_symbol">:</span><span class="sh_number">7</span><span class="sh_symbol">:</span>lp<span class="sh_symbol">:</span><span class="sh_regexp">/var/</span><span class="sh_normal">spool</span><span class="sh_symbol">/</span>lpd<span class="sh_symbol">:</span><span class="sh_regexp">/sbin/</span>nologin</li><li>mail<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">8</span><span class="sh_symbol">:</span><span class="sh_number">12</span><span class="sh_symbol">:</span>mail<span class="sh_symbol">:</span><span class="sh_regexp">/var/</span><span class="sh_normal">spool</span><span class="sh_symbol">/</span>mail<span class="sh_symbol">:</span><span class="sh_regexp">/sbin/</span>nologin</li><li>uucp<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">10</span><span class="sh_symbol">:</span><span class="sh_number">14</span><span class="sh_symbol">:</span>uucp<span class="sh_symbol">:</span><span class="sh_regexp">/var/</span><span class="sh_normal">spool</span><span class="sh_symbol">/</span>uucp<span class="sh_symbol">:</span><span class="sh_regexp">/sbin/</span>nologin</li><li>operator<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">11</span><span class="sh_symbol">:</span><span class="sh_number">0</span><span class="sh_symbol">:</span>operator<span class="sh_symbol">:</span><span class="sh_regexp">/root:/</span><span class="sh_normal">sbin</span><span class="sh_symbol">/</span>nologin</li><li>games<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">12</span><span class="sh_symbol">:</span><span class="sh_number">100</span><span class="sh_symbol">:</span>games<span class="sh_symbol">:</span><span class="sh_regexp">/usr/g</span>ames<span class="sh_symbol">:</span><span class="sh_regexp">/sbin/</span>nologin</li><li>gopher<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">13</span><span class="sh_symbol">:</span><span class="sh_number">30</span><span class="sh_symbol">:</span>gopher<span class="sh_symbol">:</span><span class="sh_regexp">/var/g</span>opher<span class="sh_symbol">:</span><span class="sh_regexp">/sbin/</span>nologin</li><li>ftp<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">14</span><span class="sh_symbol">:</span><span class="sh_number">50</span><span class="sh_symbol">:</span>FTP User<span class="sh_symbol">:</span><span class="sh_regexp">/var/</span>ftp<span class="sh_symbol">:</span><span class="sh_regexp">/sbin/</span>nologin</li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_symbol">-</span>c <span class="sh_string">'/sbin/nologin$'</span> <span class="sh_regexp">/etc/</span>passwd</li><li><span class="sh_number">32</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//结合 -c 选项输出匹配的行数</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep -m10 '/sbin/nologin$' /etc/passwd  //先确认匹配正确<font></font>
bin:x:1:1:bin:/bin:/sbin/nologin<font></font>
daemon:x:2:2:daemon:/sbin:/sbin/nologin<font></font>
adm:x:3:4:adm:/var/adm:/sbin/nologin<font></font>
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin<font></font>
mail:x:8:12:mail:/var/spool/mail:/sbin/nologin<font></font>
uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin<font></font>
operator:x:11:0:operator:/root:/sbin/nologin<font></font>
games:x:12:100:games:/usr/games:/sbin/nologin<font></font>
gopher:x:13:30:gopher:/var/gopher:/sbin/nologin<font></font>
ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin<font></font>
[root@svr5 ~]# egrep -c '/sbin/nologin$' /etc/passwd<font></font>
32  									//结合 -c 选项输出匹配的行数<font></font>
</pre></div></div>
      <p>使用 -c 选项可输出匹配行数，这与通过管道再 wc -l的效果是相同的，但是写法更简便。比如，统计使用“/bin/bash”作为登录Shell的正常用户个数，可执行：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_symbol">-</span>c <span class="sh_string">'/bin/bash$'</span> <span class="sh_regexp">/etc/</span>passwd</li><li><span class="sh_number">26</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep -c '/bin/bash$' /etc/passwd<font></font>
26<font></font>
</pre></div></div>
      <p>或者</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'/bin/bash$'</span> <span class="sh_regexp">/etc/</span>passwd <span class="sh_symbol">|</span> wc <span class="sh_symbol">-</span>l</li><li><span class="sh_number">26</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep '/bin/bash$' /etc/passwd | wc -l<font></font>
26<font></font>
</pre></div></div>
      <p>4）基本元字符 . —— 匹配任意单个字符</p>
      <p>以/etc/rc.local文件为例，确认文本内容：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># <span class="sh_normal">cat </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>rc<span class="sh_symbol">.</span>local</li><li>#<span class="sh_symbol">!</span><span class="sh_regexp">/bin/</span>sh</li><li>#</li><li># This script will be executed <span class="sh_symbol">*</span>after<span class="sh_symbol">*</span> all the other init scripts<span class="sh_symbol">.</span></li><li># You can put your own initialization stuff <span class="sh_keyword">in</span> here <span class="sh_keyword">if</span> you don<span class="sh_string">'t</span></li><li><span class="sh_string"># want to do the full Sys V style init stuff.</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_string">touch /var/lock/subsys/local</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# cat /etc/rc.local<font></font>
#!/bin/sh<font></font>
#<font></font>
# This script will be executed *after* all the other init scripts.<font></font>
# You can put your own initialization stuff in here if you don't<font></font>
# want to do the full Sys V style init stuff.<font></font>
<font></font>
touch /var/lock/subsys/local<font></font>
</pre></div></div>
      <p>输出/etc/rc.local文件内至少包括一个字符（\n换行符除外）的行，即非空行：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'.'</span> <span class="sh_regexp">/etc/</span>rc<span class="sh_symbol">.</span>local</li><li>#<span class="sh_symbol">!</span><span class="sh_regexp">/bin/</span>sh</li><li>#</li><li># This script will be executed <span class="sh_symbol">*</span>after<span class="sh_symbol">*</span> all the other init scripts<span class="sh_symbol">.</span></li><li># You can put your own initialization stuff <span class="sh_keyword">in</span> here <span class="sh_keyword">if</span> you don<span class="sh_string">'t</span></li><li><span class="sh_string"># want to do the full Sys V style init stuff.</span></li><li><span class="sh_string">touch /var/lock/subsys/local</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep '.' /etc/rc.local<font></font>
#!/bin/sh<font></font>
#<font></font>
# This script will be executed *after* all the other init scripts.<font></font>
# You can put your own initialization stuff in here if you don't<font></font>
# want to do the full Sys V style init stuff.<font></font>
touch /var/lock/subsys/local<font></font>
</pre></div></div>
      <p>输出/etc/rc.local文件内的空行（用 –v 选项将条件取反）：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_symbol">-</span>v <span class="sh_string">'.'</span> <span class="sh_regexp">/etc/</span>rc<span class="sh_symbol">.</span>local</li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span>#</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep -v '.' /etc/rc.local<font></font>
<font></font>
[root@svr5 ~]#<font></font>
</pre></div></div>
      <p>上述取空行的操作与下列操作效果相同：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'^$'</span> <span class="sh_regexp">/etc/</span>rc<span class="sh_symbol">.</span>local</li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span>#</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep '^$' /etc/rc.local<font></font>
<font></font>
[root@svr5 ~]#<font></font>
</pre></div></div>
      <p>5）基本元字符 +、?、* —— 目标出现的次数</p>
      <p>还以/etc/rc.local文件为例：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># <span class="sh_normal">cat </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>rc<span class="sh_symbol">.</span>local</li><li>#<span class="sh_symbol">!</span><span class="sh_regexp">/bin/</span>sh</li><li>#</li><li># This script will be executed <span class="sh_symbol">*</span>after<span class="sh_symbol">*</span> all the other init scripts<span class="sh_symbol">.</span></li><li># You can put your own initialization stuff <span class="sh_keyword">in</span> here <span class="sh_keyword">if</span> you don<span class="sh_string">'t</span></li><li><span class="sh_string"># want to do the full Sys V style init stuff.</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_string">touch /var/lock/subsys/local</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# cat /etc/rc.local<font></font>
#!/bin/sh<font></font>
#<font></font>
# This script will be executed *after* all the other init scripts.<font></font>
# You can put your own initialization stuff in here if you don't<font></font>
# want to do the full Sys V style init stuff.<font></font>
<font></font>
touch /var/lock/subsys/local<font></font>
</pre></div></div>
      <p>输出包括 f、ff、ff、……的行，即“f”至少出现一次：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'f+'</span> <span class="sh_regexp">/etc/</span>rc<span class="sh_symbol">.</span>local</li><li># This script will be executed <span class="sh_symbol">*</span>after<span class="sh_symbol">*</span> all the other init scripts<span class="sh_symbol">.</span></li><li># You can put your own initialization stuff <span class="sh_keyword">in</span> here <span class="sh_keyword">if</span> you don<span class="sh_string">'t</span></li><li><span class="sh_string"># want to do the full Sys V style init stuff.</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep 'f+' /etc/rc.local<font></font>
# This script will be executed *after* all the other init scripts.<font></font>
# You can put your own initialization stuff in here if you don't<font></font>
# want to do the full Sys V style init stuff.<font></font>
</pre></div></div>
      <p>输出包括init、initial的行，即末尾的“ial”最多出现一次（可能没有）：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'init(ial)?'</span> <span class="sh_regexp">/etc/</span>rc<span class="sh_symbol">.</span>local</li><li># This script will be executed <span class="sh_symbol">*</span>after<span class="sh_symbol">*</span> all the other init scripts<span class="sh_symbol">.</span></li><li># You can put your own initialization stuff <span class="sh_keyword">in</span> here <span class="sh_keyword">if</span> you don<span class="sh_string">'t</span></li><li><span class="sh_string"># want to do the full Sys V style init stuff.</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep 'init(ial)?' /etc/rc.local<font></font>
# This script will be executed *after* all the other init scripts.<font></font>
# You can put your own initialization stuff in here if you don't<font></font>
# want to do the full Sys V style init stuff.<font></font>
</pre></div></div>
      <p>输出包括stu、stuf、stuff、stufff、……的行，即末尾的“f”可出现任意多次，也可以没有。重复目标只有一个字符时，可以不使用括号：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'stuf*'</span> <span class="sh_regexp">/etc/</span>rc<span class="sh_symbol">.</span>local</li><li># You can put your own initialization stuff <span class="sh_keyword">in</span> here <span class="sh_keyword">if</span> you don<span class="sh_string">'t</span></li><li><span class="sh_string"># want to do the full Sys V style init stuff.</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep 'stuf*' /etc/rc.local<font></font>
# You can put your own initialization stuff in here if you don't<font></font>
# want to do the full Sys V style init stuff.<font></font>
</pre></div></div>
      <p>输出所有行，单独的“.*”可匹配任意行（包括空行）：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'.*'</span> <span class="sh_regexp">/etc/</span>rc<span class="sh_symbol">.</span>local</li><li>#<span class="sh_symbol">!</span><span class="sh_regexp">/bin/</span>sh</li><li>#</li><li># This script will be executed <span class="sh_symbol">*</span>after<span class="sh_symbol">*</span> all the other init scripts<span class="sh_symbol">.</span></li><li># You can put your own initialization stuff <span class="sh_keyword">in</span> here <span class="sh_keyword">if</span> you don<span class="sh_string">'t</span></li><li><span class="sh_string"># want to do the full Sys V style init stuff.</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_string">touch /var/lock/subsys/local</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep '.*' /etc/rc.local<font></font>
#!/bin/sh<font></font>
#<font></font>
# This script will be executed *after* all the other init scripts.<font></font>
# You can put your own initialization stuff in here if you don't<font></font>
# want to do the full Sys V style init stuff.<font></font>
<font></font>
touch /var/lock/subsys/local<font></font>
</pre></div></div>
      <p>输出/etc/passwd文件内“r”开头且以“nologin”结尾的用户记录，即中间可以是任意字符：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'^r.*nologin$'</span> <span class="sh_regexp">/etc/</span>passwd</li><li>rpc<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">32</span><span class="sh_symbol">:</span><span class="sh_number">32</span><span class="sh_symbol">:</span>Portmapper RPC user<span class="sh_symbol">:</span><span class="sh_regexp">/:/</span><span class="sh_normal">sbin</span><span class="sh_symbol">/</span>nologin</li><li>rpcuser<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">29</span><span class="sh_symbol">:</span><span class="sh_number">29</span><span class="sh_symbol">:</span>RPC Service User<span class="sh_symbol">:</span><span class="sh_regexp">/var/</span><span class="sh_normal">lib</span><span class="sh_symbol">/</span>nfs<span class="sh_symbol">:</span><span class="sh_regexp">/sbin/</span>nologin</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep '^r.*nologin$' /etc/passwd<font></font>
rpc:x:32:32:Portmapper RPC user:/:/sbin/nologin<font></font>
rpcuser:x:29:29:RPC Service User:/var/lib/nfs:/sbin/nologin<font></font>
</pre></div></div>
      <p>6）元字符 {} —— 限定出现的次数范围</p>
      <p>创建一个练习用的测试文件：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># vim brace<span class="sh_symbol">.</span>txt</li><li>ab def ghi abdr</li><li>dedef abab ghighi</li><li>abcab CD<span class="sh_symbol">-</span>ROM</li><li>TARENA IT GROUP</li><li>cdcd ababab</li><li>Hello abababab World</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# vim brace.txt<font></font>
ab def ghi abdr<font></font>
dedef abab ghighi<font></font>
abcab CD-ROM<font></font>
TARENA IT GROUP<font></font>
cdcd ababab<font></font>
Hello abababab World<font></font>
</pre></div></div>
      <p>输出包括ababab的行，即“ab”连续出现3次：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'(ab){3}'</span> brace<span class="sh_symbol">.</span>txt</li><li>cdcd ababab</li><li>Hello abababab World</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep '(ab){3}' brace.txt<font></font>
cdcd ababab<font></font>
Hello abababab World<font></font>
</pre></div></div>
      <p>输出包括abab、ababab、abababab的行，即“ab”连续出现2~4次：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'(ab){2,4}'</span> brace<span class="sh_symbol">.</span>txt</li><li>dedef abab ghighi</li><li>cdcd ababab</li><li>Hello abababab World</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep '(ab){2,4}' brace.txt<font></font>
dedef abab ghighi<font></font>
cdcd ababab<font></font>
Hello abababab World<font></font>
</pre></div></div>
      <p>输出包括ababab、abababab、……的行，即“ab”最少连续出现3次：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'(ab){3,}'</span> brace<span class="sh_symbol">.</span>txt</li><li>cdcd ababab</li><li>Hello abababab World</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep '(ab){3,}' brace.txt<font></font>
cdcd ababab<font></font>
Hello abababab World<font></font>
</pre></div></div>
      <p>7）元字符 [] —— 匹配范围内的单个字符</p>
      <p>还以前面的测试文件bracet.txt为例：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># cat brace<span class="sh_symbol">.</span>txt</li><li>ab def ghi abdr</li><li>dedef abab ghighi</li><li>abcab CD<span class="sh_symbol">-</span>ROM</li><li>TARENA IT GROUP</li><li>cdcd ababab</li><li>Hello abababab World</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# cat brace.txt<font></font>
ab def ghi abdr<font></font>
dedef abab ghighi<font></font>
abcab CD-ROM<font></font>
TARENA IT GROUP<font></font>
cdcd ababab<font></font>
Hello abababab World<font></font>
</pre></div></div>
      <p>输出包括abc、abd的行，即前两个字符为“ab”，第三个字符只要是c、d中的一个就符合条件：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'ab[cd]'</span> brace<span class="sh_symbol">.</span>txt</li><li>ab def ghi abdr</li><li>abcab CD<span class="sh_symbol">-</span>ROM</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep 'ab[cd]' brace.txt<font></font>
ab def ghi abdr<font></font>
abcab CD-ROM<font></font>
</pre></div></div>
      <p>输出包括大写字母的行，使用[A-Z]匹配连续范围：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'[A-Z]'</span> brace<span class="sh_symbol">.</span>txt</li><li>abcab CD<span class="sh_symbol">-</span>ROM</li><li>TARENA IT GROUP</li><li>Hello abababab World</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep '[A-Z]' brace.txt<font></font>
abcab CD-ROM<font></font>
TARENA IT GROUP<font></font>
Hello abababab World<font></font>
</pre></div></div>
      <p>过滤“非小写字母”的其他字符：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'[^a-z]'</span> brace<span class="sh_symbol">.</span>txt</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep '[^a-z]' brace.txt
</pre></div></div>
      <p>8）单词边界匹配</p>
      <p>以文件/etc/rc.local为例：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># <span class="sh_normal">cat </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>rc<span class="sh_symbol">.</span>local</li><li>#<span class="sh_symbol">!</span><span class="sh_regexp">/bin/</span>sh</li><li>#</li><li># This script will be executed <span class="sh_symbol">*</span>after<span class="sh_symbol">*</span> all the other init scripts<span class="sh_symbol">.</span></li><li># You can put your own initialization stuff <span class="sh_keyword">in</span> here <span class="sh_keyword">if</span> you don<span class="sh_string">'t</span></li><li><span class="sh_string"># want to do the full Sys V style init stuff.</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_string">touch /var/lock/subsys/local</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# cat /etc/rc.local<font></font>
#!/bin/sh<font></font>
#<font></font>
# This script will be executed *after* all the other init scripts.<font></font>
# You can put your own initialization stuff in here if you don't<font></font>
# want to do the full Sys V style init stuff.<font></font>
<font></font>
touch /var/lock/subsys/local<font></font>
</pre></div></div>
      <p>输出包括单词“init”的行，文件中“initialization”不合要求：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'</span><span class="sh_specialchar">\b</span><span class="sh_string">init</span><span class="sh_specialchar">\b</span><span class="sh_string">'</span> <span class="sh_regexp">/etc/</span>rc<span class="sh_symbol">.</span>local</li><li># This script will be executed <span class="sh_symbol">*</span>after<span class="sh_symbol">*</span> all the other init scripts<span class="sh_symbol">.</span></li><li># want to <span class="sh_keyword">do</span> the full Sys V style init stuff<span class="sh_symbol">.</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep '\binit\b' /etc/rc.local<font></font>
# This script will be executed *after* all the other init scripts.<font></font>
# want to do the full Sys V style init stuff.<font></font>
</pre></div></div>
      <p>或者：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'</span><span class="sh_specialchar">\&lt;</span><span class="sh_string">init</span><span class="sh_specialchar">\&gt;</span><span class="sh_string">'</span> <span class="sh_regexp">/etc/</span>rc<span class="sh_symbol">.</span>local</li><li># This script will be executed <span class="sh_symbol">*</span>after<span class="sh_symbol">*</span> all the other init scripts<span class="sh_symbol">.</span></li><li># want to <span class="sh_keyword">do</span> the full Sys V style init stuff<span class="sh_symbol">.</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep '\&lt;init\&gt;' /etc/rc.local<font></font>
# This script will be executed *after* all the other init scripts.<font></font>
# want to do the full Sys V style init stuff.<font></font>
</pre></div></div>
      <p>输出包括以“ll”结尾的单词的行，使用 \&gt; 匹配单词右边界：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'ll</span><span class="sh_specialchar">\&gt;</span><span class="sh_string">'</span> <span class="sh_regexp">/etc/</span>rc<span class="sh_symbol">.</span>local</li><li># This script will be executed <span class="sh_symbol">*</span>after<span class="sh_symbol">*</span> all the other init scripts<span class="sh_symbol">.</span></li><li># want to <span class="sh_keyword">do</span> the full Sys V style init stuff<span class="sh_symbol">.</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep 'll\&gt;' /etc/rc.local<font></font>
# This script will be executed *after* all the other init scripts.<font></font>
# want to do the full Sys V style init stuff.<font></font>
</pre></div></div>
      <p>或者：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_string">'ll</span><span class="sh_specialchar">\b</span><span class="sh_string">'</span> <span class="sh_regexp">/etc/</span>rc<span class="sh_symbol">.</span>local</li><li># This script will be executed <span class="sh_symbol">*</span>after<span class="sh_symbol">*</span> all the other init scripts<span class="sh_symbol">.</span></li><li># want to <span class="sh_keyword">do</span> the full Sys V style init stuff<span class="sh_symbol">.</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep 'll\b' /etc/rc.local<font></font>
# This script will be executed *after* all the other init scripts.<font></font>
# want to do the full Sys V style init stuff.<font></font>
</pre></div></div>
      <p>9）多个条件的组合</p>
      <p>通过dmesg启动日志查看蓝牙设备、网卡设备相关的信息：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># egrep <span class="sh_symbol">-</span>i <span class="sh_string">'eth|network|bluetooth'</span> <span class="sh_regexp">/var/</span><span class="sh_normal">log</span><span class="sh_symbol">/</span>dmesg</li><li>Initalizing network drop monitor service</li><li>Bluetooth<span class="sh_symbol">:</span> Core ver <span class="sh_number">2.10</span></li><li>Bluetooth<span class="sh_symbol">:</span> HCI device and connection manager initialized</li><li>Bluetooth<span class="sh_symbol">:</span> HCI socket layer initialized</li><li>Bluetooth<span class="sh_symbol">:</span> HCI USB driver ver <span class="sh_number">2.9</span></li><li><span class="sh_function">Intel</span><span class="sh_symbol">(</span>R<span class="sh_symbol">)</span> <span class="sh_normal">PRO</span><span class="sh_symbol">/</span><span class="sh_number">1000</span> Network Driver <span class="sh_symbol">-</span> version <span class="sh_number">7.3.21</span><span class="sh_symbol">-</span>k4<span class="sh_number">-3</span><span class="sh_symbol">-</span>NAPI</li><li>e1000<span class="sh_symbol">:</span> eth0<span class="sh_symbol">:</span> e1000_probe<span class="sh_symbol">:</span> <span class="sh_function">Intel</span><span class="sh_symbol">(</span>R<span class="sh_symbol">)</span> <span class="sh_normal">PRO</span><span class="sh_symbol">/</span><span class="sh_number">1000</span> Network Connection</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# egrep -i 'eth|network|bluetooth' /var/log/dmesg<font></font>
Initalizing network drop monitor service<font></font>
Bluetooth: Core ver 2.10<font></font>
Bluetooth: HCI device and connection manager initialized<font></font>
Bluetooth: HCI socket layer initialized<font></font>
Bluetooth: HCI USB driver ver 2.9<font></font>
Intel(R) PRO/1000 Network Driver - version 7.3.21-k4-3-NAPI<font></font>
e1000: eth0: e1000_probe: Intel(R) PRO/1000 Network Connection<font></font>
<font></font>
</pre></div></div>
      <a name="case2">
      </a>
      <h2>2 案例2：sed基本用法</h2>
      <h3>2.1 问题</h3>
      <p>本案例要求熟悉sed命令的p、d、s等常见操作，并结合正则表达式，完成以下任务：</p>
      <ul class="list">
        <li>删除文件中每行的第二个、最后一个字符
</li>
        <li>将文件中每行的第一个、第二个字符互换
</li>
        <li>删除文件中所有的数字
</li>
        <li>为文件中每个大写字母添加括号
</li>
      </ul>
      <h3>2.2 方案</h3>
      <p>sed文本处理工具的用法：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>用法<span class="sh_number">1</span>：前置命令 <span class="sh_symbol">|</span> sed  <span class="sh_symbol">[</span>选项<span class="sh_symbol">]</span>  <span class="sh_string">'条件指令'</span></li><li>用法<span class="sh_number">2</span>：sed  <span class="sh_symbol">[</span>选项<span class="sh_symbol">]</span>  <span class="sh_string">'条件指令'</span>  文件<span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">用法1：前置命令 | sed  [选项]  '条件指令'<font></font>
用法2：sed  [选项]  '条件指令'  文件.. ..<font></font>
</pre></div></div>
      <p>相关说明如下：</p>
      <ul class="list">
        <li>条件可以是行号或者/正则/
</li>
        <li>没有条件时，默认为所有条件
</li>
        <li>指令可以是增、删、改、查等指令
</li>
        <li>默认sed会将所有输出的内容都打印出来，可以使用-n屏蔽默认输出
</li>
        <li>选项中可以使用-r选项，让sed支持扩展正则
</li>
      </ul>
      <h3>2.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：认识sed工具的基本选项</p>
      <p>sed命令的常用选项如下：</p>
      <p>-n（屏蔽默认输出，默认sed会输出读取文档的全部内容）</p>
      <p>-r（让sed支持扩展正则）</p>
      <p>-i（sed直接修改源文件，默认sed只是通过内存临时修改文件，源文件无影响）</p>
      <p>1）sed命令的 -n 选项</p>
      <p>执行p打印等过滤操作时，希望看到的是符合条件的文本。但不使用任何选项时，默认会将原始文本一并输出，从而干扰过滤效果。比如，尝试用sed输出/etc/hosts的第1行：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_string">'1p'</span> <span class="sh_regexp">/etc/</span>hosts</li><li><span class="sh_number">127.0.0.1</span>   localhost localhost<span class="sh_symbol">.</span>localdomain localhost4 localhost4<span class="sh_symbol">.</span>localdomain4</li><li><span class="sh_number">127.0.0.1</span>   localhost localhost<span class="sh_symbol">.</span>localdomain localhost4 localhost4<span class="sh_symbol">.</span>localdomain4</li><li><span class="sh_symbol">::</span><span class="sh_number">1</span>         localhost localhost<span class="sh_symbol">.</span>localdomain localhost6 localhost6<span class="sh_symbol">.</span>localdomain6</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed '1p' /etc/hosts<font></font>
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4<font></font>
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4<font></font>
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6<font></font>
</pre></div></div>
      <p>可以发现所有的行都被显示出来了（第1行重复2次）。—— 正确的用法应该添加 -n 选项，这样就可以只显示第1行了：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>n <span class="sh_string">'1p'</span> <span class="sh_regexp">/etc/</span>hosts</li><li><span class="sh_number">127.0.0.1</span>   localhost localhost<span class="sh_symbol">.</span>localdomain localhost4 localhost4<span class="sh_symbol">.</span>localdomain4</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed -n '1p' /etc/hosts<font></font>
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4<font></font>
</pre></div></div>
      <p>行号可以是连续的行号，如打印passwd第3到第6行账户的信息：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_symbol">-</span>n <span class="sh_string">'3,6p'</span> <span class="sh_regexp">/etc/</span>passwd</li><li>bin<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">1</span><span class="sh_symbol">:</span><span class="sh_number">1</span><span class="sh_symbol">:</span>bin<span class="sh_symbol">:</span><span class="sh_regexp">/bin:/</span><span class="sh_normal">sbin</span><span class="sh_symbol">/</span>nologin</li><li>daemon<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">2</span><span class="sh_symbol">:</span><span class="sh_number">2</span><span class="sh_symbol">:</span>daemon<span class="sh_symbol">:</span><span class="sh_regexp">/sbin:/</span><span class="sh_normal">sbin</span><span class="sh_symbol">/</span>nologin</li><li>adm<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">3</span><span class="sh_symbol">:</span><span class="sh_number">4</span><span class="sh_symbol">:</span>adm<span class="sh_symbol">:</span><span class="sh_regexp">/var/</span>adm<span class="sh_symbol">:</span><span class="sh_regexp">/sbin/</span>nologin</li><li>lp<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">4</span><span class="sh_symbol">:</span><span class="sh_number">7</span><span class="sh_symbol">:</span>lp<span class="sh_symbol">:</span><span class="sh_regexp">/var/</span><span class="sh_normal">spool</span><span class="sh_symbol">/</span>lpd<span class="sh_symbol">:</span><span class="sh_regexp">/sbin/</span>nologin</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed  -n '3,6p' /etc/passwd<font></font>
bin:x:1:1:bin:/bin:/sbin/nologin<font></font>
daemon:x:2:2:daemon:/sbin:/sbin/nologin<font></font>
adm:x:3:4:adm:/var/adm:/sbin/nologin<font></font>
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin<font></font>
</pre></div></div>
      <p>2）sed命令的 -i 选项</p>
      <p>正常情况下，sed命令所做的处理只是把操作结果（包括打印、删除等）输出到当前终端屏幕，而并不会对原始文件做任何更改：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_string">'d'</span> <span class="sh_regexp">/etc/</span>passwd  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//删除所有行</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># <span class="sh_normal">cat </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>passwd  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//查看原始文本，并未改动</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed 'd' /etc/passwd  					//删除所有行<font></font>
[root@svr5 ~]# cat /etc/passwd  						//查看原始文本，并未改动<font></font>
</pre></div></div>
      <p class="emphasiz">若希望直接修改文件内容，应添加选项 -i 。</p>
      <p>比如，直接删除test.txt（自行创建一个任意内容的文件）的第1~4行：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>i <span class="sh_string">'1,4d'</span> test<span class="sh_symbol">.</span>txt    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//删除操作</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># cat test<span class="sh_symbol">.</span>txt  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//确认删除结果</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed -i '1,4d' test.txt    		//删除操作<font></font>
[root@svr5 ~]# cat test.txt  					//确认删除结果<font></font>
</pre></div></div>
      <p class="emphasiz">下文中关于使用sed修改文件的示例中，为了避免大家在练习过程中因误操作导致系统故障，命令省略 –i 选项，不再逐一说明。需要时，大家可自行加上此选项。</p>
      <p>3）多个指令可以使用分号隔离</p>
      <p>用分号来隔离多个操作，比如：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>n <span class="sh_string">'1p;4p'</span> <span class="sh_regexp">/etc/</span>passwd</li><li>root<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">0</span><span class="sh_symbol">:</span><span class="sh_number">0</span><span class="sh_symbol">:</span>root<span class="sh_symbol">:</span><span class="sh_regexp">/root:/</span><span class="sh_normal">bin</span><span class="sh_symbol">/</span>bash</li><li>adm<span class="sh_symbol">:</span>x<span class="sh_symbol">:</span><span class="sh_number">3</span><span class="sh_symbol">:</span><span class="sh_number">4</span><span class="sh_symbol">:</span>adm<span class="sh_symbol">:</span><span class="sh_regexp">/var/</span>adm<span class="sh_symbol">:</span><span class="sh_regexp">/sbin/</span>nologin</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed -n '1p;4p' /etc/passwd<font></font>
root:x:0:0:root:/root:/bin/bash<font></font>
adm:x:3:4:adm:/var/adm:/sbin/nologin<font></font>
</pre></div></div>
      <p class="number">步骤二：认识sed工具的条件</p>
      <p># sed  [选项]  '条件指令'  文件.. ..</p>
      <p>sed命令可以使用行号或正则做为条件匹配：</p>
      <p>1）行号案例</p>
      <p>打印第3行：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>n <span class="sh_string">'3p'</span> <span class="sh_regexp">/etc/</span>passwd</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed -n '3p' /etc/passwd
</pre></div></div>
      <p>打印第3到5行：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>n <span class="sh_string">'3,5p'</span> <span class="sh_regexp">/etc/</span>passwd</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed -n '3,5p' /etc/passwd
</pre></div></div>
      <p>打印第3和5行：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>n <span class="sh_string">'3p;5p'</span> <span class="sh_regexp">/etc/</span>passwd</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed -n '3p;5p' /etc/passwd
</pre></div></div>
      <p>打印第3以及后面的10行：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>n <span class="sh_string">'3,+10p'</span> <span class="sh_regexp">/etc/</span>passwd</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed -n '3,+10p' /etc/passwd
</pre></div></div>
      <p>打印奇数行：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>n <span class="sh_string">'1~2p'</span> <span class="sh_regexp">/etc/</span>passwd</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed -n '1~2p' /etc/passwd
</pre></div></div>
      <p>打印偶数行：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>n <span class="sh_string">'2~2p'</span> <span class="sh_regexp">/etc/</span>passwd</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed -n '2~2p' /etc/passwd
</pre></div></div>
      <p>2）正则案例</p>
      <p>打印包含root的行：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>n <span class="sh_string">'/root/p'</span> <span class="sh_regexp">/etc/</span>passwd</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed -n '/root/p' /etc/passwd
</pre></div></div>
      <p>打印bash结尾的行：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>n <span class="sh_string">'/bash$/p'</span> <span class="sh_regexp">/etc/</span>passwd</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed -n '/bash$/p' /etc/passwd
</pre></div></div>
      <p>3）没有条件，则表示匹配所有行</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>n <span class="sh_string">'p'</span> <span class="sh_regexp">/etc/</span>passwd</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed -n 'p' /etc/passwd
</pre></div></div>
      <p class="number">步骤三：sed工具的p、d、s操作指令案例集合</p>
      <p>1）下面看看sed工具的p指令案例集锦（自己提前生成一个a.txt文件）</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_symbol">-</span>n <span class="sh_string">'p'</span> a<span class="sh_symbol">.</span>txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//输出所有行，等同于cat a.txt</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_symbol">-</span>n <span class="sh_string">'4p'</span> a<span class="sh_symbol">.</span>txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//输出第4行</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_symbol">-</span>n <span class="sh_string">'4,7p'</span> a<span class="sh_symbol">.</span>txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//输出第4~7行</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_symbol">-</span>n <span class="sh_string">'4,+10p'</span> a<span class="sh_symbol">.</span>txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//输出第4行及其后的10行内容</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_symbol">-</span>n <span class="sh_string">'/^bin/p'</span> a<span class="sh_symbol">.</span>txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//输出以bin开头的行</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_symbol">-</span>n <span class="sh_string">'$='</span> a<span class="sh_symbol">.</span>txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//输出文件的行数</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed  -n 'p' a.txt			//输出所有行，等同于cat a.txt<font></font>
[root@svr5 ~]# sed  -n '4p' a.txt			//输出第4行<font></font>
[root@svr5 ~]# sed  -n '4,7p' a.txt		//输出第4~7行<font></font>
[root@svr5 ~]# sed  -n '4,+10p' a.txt		//输出第4行及其后的10行内容<font></font>
[root@svr5 ~]# sed  -n '/^bin/p' a.txt		//输出以bin开头的行<font></font>
[root@svr5 ~]# sed  -n '$=' a.txt			//输出文件的行数<font></font>
</pre></div></div>
      <p>2）下面看看sed工具的d指令案例集锦（自己提前生成一个a.txt文件）</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_string">'3,5d'</span> a<span class="sh_symbol">.</span>txt &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//删除第3~5行</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_string">'/xml/d'</span> a<span class="sh_symbol">.</span>txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//删除所有包含xml的行</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_string">'/xml/!d'</span> a<span class="sh_symbol">.</span>txt &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//删除不包含xml的行，!符号表示取反</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_string">'/^install/d'</span> a<span class="sh_symbol">.</span>txt&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//删除以install开头的行</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_string">'$d'</span> a<span class="sh_symbol">.</span>txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//删除文件的最后一行</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_string">'/^$/d'</span> a<span class="sh_symbol">.</span>txt &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//删除所有空行</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed  '3,5d' a.txt 			//删除第3~5行<font></font>
[root@svr5 ~]# sed  '/xml/d' a.txt			//删除所有包含xml的行<font></font>
[root@svr5 ~]# sed  '/xml/!d' a.txt 		//删除不包含xml的行，!符号表示取反<font></font>
[root@svr5 ~]# sed  '/^install/d' a.txt	//删除以install开头的行<font></font>
[root@svr5 ~]# sed  '$d' a.txt				//删除文件的最后一行<font></font>
[root@svr5 ~]# sed  '/^$/d' a.txt 			//删除所有空行<font></font>
</pre></div></div>
      <p>3）sed命令的s替换基本功能（s/旧内容/新内容/选项）：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># vim  test<span class="sh_symbol">.</span>txt    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//新建素材</span></li><li><span class="sh_number">2017</span> <span class="sh_number">2011</span> <span class="sh_number">2018</span></li><li><span class="sh_number">2017</span> <span class="sh_number">2017</span> <span class="sh_number">2024</span></li><li><span class="sh_number">2017</span> <span class="sh_number">2017</span> <span class="sh_number">2017</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_string">'s/2017/xxxx/'</span>           test<span class="sh_symbol">.</span>txt</li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_string">'s/2017/xxxx/g'</span>          test<span class="sh_symbol">.</span>txt</li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_string">'s/2017/xxxx/2'</span>          test<span class="sh_symbol">.</span>txt</li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_string">'s/2017//2'</span>              test<span class="sh_symbol">.</span>txt</li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>n <span class="sh_string">'s/2017/xxxx/p'</span>      test<span class="sh_symbol">.</span>txt</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# vim  test.txt    			//新建素材<font></font>
2017 2011 2018<font></font>
2017 2017 2024<font></font>
2017 2017 2017<font></font>
<font></font>
[root@svr5 ~]# sed 's/2017/xxxx/'           test.txt<font></font>
[root@svr5 ~]# sed 's/2017/xxxx/g'          test.txt<font></font>
[root@svr5 ~]# sed 's/2017/xxxx/2'          test.txt<font></font>
[root@svr5 ~]# sed 's/2017//2'              test.txt<font></font>
[root@svr5 ~]# sed -n 's/2017/xxxx/p'      test.txt<font></font>
</pre></div></div>
      <p>4）下面看看sed工具的s指令案例集锦（自己提前生成一个a.txt文件）</p>
      <p>注意：替换操作的分隔“/”可改用其他字符，如#、&amp;等，便于修改文件路径</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_string">'s/xml/XML/'</span>  a<span class="sh_symbol">.</span>txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//将每行中第一个xml替换为XML</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_string">'s/xml/XML/3'</span> a<span class="sh_symbol">.</span>txt &nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//将每行中的第3个xml替换为XML</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_string">'s/xml/XML/g'</span> a<span class="sh_symbol">.</span>txt &nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//将所有的xml都替换为XML</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_string">'s/xml//g'</span>     a<span class="sh_symbol">.</span>txt &nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//将所有的xml都删除（替换为空串）</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_string">'s#/bin/bash#/sbin/sh#'</span> a<span class="sh_symbol">.</span>txt  <span class="sh_comment">//将/bin/bash替换为/sbin/sh</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_string">'4,7s/^/#/'</span>   a<span class="sh_symbol">.</span>txt &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//将第4~7行注释掉（行首加#号）</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_string">'s/^#an/an/'</span>  a<span class="sh_symbol">.</span>txt &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//解除以#an开头的行的注释（去除行首的#号）</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed 's/xml/XML/'  a.txt		//将每行中第一个xml替换为XML<font></font>
[root@svr5 ~]# sed 's/xml/XML/3' a.txt 	//将每行中的第3个xml替换为XML<font></font>
[root@svr5 ~]# sed 's/xml/XML/g' a.txt 	//将所有的xml都替换为XML<font></font>
[root@svr5 ~]# sed 's/xml//g'     a.txt 	//将所有的xml都删除（替换为空串）<font></font>
[root@svr5 ~]# sed 's#/bin/bash#/sbin/sh#' a.txt  //将/bin/bash替换为/sbin/sh<font></font>
[root@svr5 ~]# sed '4,7s/^/#/'   a.txt 		//将第4~7行注释掉（行首加#号）<font></font>
[root@svr5 ~]# sed 's/^#an/an/'  a.txt 		//解除以#an开头的行的注释（去除行首的#号）<font></font>
</pre></div></div>
      <p class="number">步骤四：利用sed完成本例要求的任务</p>
      <p>参考数据文件内容如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># cat nssw<span class="sh_symbol">.</span>txt</li><li>Hello the world</li><li>ni hao ma beijing</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# cat nssw.txt<font></font>
Hello the world<font></font>
ni hao ma beijing<font></font>
</pre></div></div>
      <p>本小节的操作使用nssw.txt作为测试文件。</p>
      <p>1）删除文件中每行的第二个、最后一个字符</p>
      <p>分两次替换操作，第一次替换掉第2个字符，第二次替换掉最后一个字符：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_string">'s/.//2 ; s/.$//'</span> nssw<span class="sh_symbol">.</span>txt </li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed 's/.//2 ; s/.$//' nssw.txt 
</pre></div></div>
      <p>2）将文件中每行的第一个、倒数第1个字符互换</p>
      <p>每行文本拆分为“第1个字符”、“中间的所有字符”、“倒数第1个字符”三个部分，然后通过替换操作重排顺序为“3-2-1”：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>r <span class="sh_string">'s/^(.)(.*)(.)$/</span><span class="sh_specialchar">\3\2\1</span><span class="sh_string">/'</span> nssw<span class="sh_symbol">.</span>txt</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed -r 's/^(.)(.*)(.)$/\3\2\1/' nssw.txt
</pre></div></div>
      <p>3）删除文件中所有的数字</p>
      <p>因原文件内没有数字，行首也没有空格，这里稍作做一点处理，生成一个新测试文件：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_string">'s/[0-9]//'</span> nssw<span class="sh_symbol">.</span>txt</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed 's/[0-9]//' nssw.txt
</pre></div></div>
      <p>以nssw2.txt文件为例，删除所有数字、行首空格的操作如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>r <span class="sh_string">'s/[0-9]//g;s/^( )+//'</span> nssw2<span class="sh_symbol">.</span>txt</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed -r 's/[0-9]//g;s/^( )+//' nssw2.txt
</pre></div></div>
      <p>4）为文件中每个大写字母添加括号</p>
      <p>使用“（）”可实现保留功能，所以可参考下列操作解决：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed <span class="sh_symbol">-</span>r <span class="sh_string">'s/([A-Z])/[</span><span class="sh_specialchar">\1</span><span class="sh_string">]/g'</span> nssw<span class="sh_symbol">.</span>txt</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed -r 's/([A-Z])/[\1]/g' nssw.txt
</pre></div></div>
      <a name="case3">
      </a>
      <h2>3 案例3：使用sed修改系统配置</h2>
      <h3>3.1 问题</h3>
      <p>本案例要求熟悉课上的sed应用案例，并编写脚本anonftp.sh，实现以下功能：</p>
      <ul class="list">
        <li>通过yum安装vsftpd软件包
</li>
        <li>修改vsftpd服务配置，开启匿名上传
</li>
        <li>调整/var/ftp/pub目录权限，允许写入
</li>
        <li>启动vsftpd服务，并设置开机自运行
</li>
      </ul>
      <h3>3.2 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：编写anonftp.sh脚本，用来装配匿名FTP服务</p>
      <p>1）任务需求及思路分析</p>
      <p>vsftpd服务的安装、改目录权限、起服务等操作可以直接写在脚本中。</p>
      <p>修改vsftpd.conf配置的工作可以使用sed命令，根据默认配置，只需要定位到以#anon开头的行，去掉开头的注释即可。</p>
      <p>2）根据实现思路编写脚本文件</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># vim anonftp<span class="sh_symbol">.</span>sh</li><li>#<span class="sh_symbol">!</span><span class="sh_regexp">/bin/</span>bash</li><li>yum <span class="sh_symbol">-</span>y install vsftpd &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//安装vsftpd软件</span></li><li><span class="sh_normal">cp </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span><span class="sh_normal">vsftpd</span><span class="sh_symbol">/</span>vsftpd<span class="sh_symbol">.</span>conf<span class="sh_cbracket">{</span><span class="sh_symbol">,.</span>bak<span class="sh_cbracket">}</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//备份默认的配置文件</span></li><li>sed <span class="sh_symbol">-</span>i <span class="sh_string">"s/^#anon/anon/"</span> <span class="sh_regexp">/etc/</span><span class="sh_normal">vsftpd</span><span class="sh_symbol">/</span>vsftpd<span class="sh_symbol">.</span>conf  &nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//修改服务配置</span></li><li>chmod <span class="sh_number">777</span><span class="sh_normal"> </span><span class="sh_symbol">/</span><span class="sh_keyword">var</span><span class="sh_regexp">/ftp/</span>pub  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//调整目录权限</span></li><li>systemctl start vsftpd&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//启动服务</span></li><li>systemctl enable vsftpd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//设为自动运行</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># chmod <span class="sh_symbol">+</span>x anonftp<span class="sh_symbol">.</span>sh</li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># <span class="sh_symbol">./</span>anonftp<span class="sh_symbol">.</span>sh</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# vim anonftp.sh<font></font>
#!/bin/bash<font></font>
yum -y install vsftpd 							//安装vsftpd软件<font></font>
cp /etc/vsftpd/vsftpd.conf{,.bak}  				//备份默认的配置文件<font></font>
sed -i "s/^#anon/anon/" /etc/vsftpd/vsftpd.conf  	//修改服务配置<font></font>
chmod 777 /var/ftp/pub  							//调整目录权限<font></font>
systemctl start vsftpd	  						//启动服务<font></font>
systemctl enable vsftpd							//设为自动运行<font></font>
<font></font>
[root@svr5 ~]# chmod +x anonftp.sh<font></font>
[root@svr5 ~]# ./anonftp.sh<font></font>
</pre></div></div>
      <a name="case4">
      </a>
      <h2>4 案例4：sed多行文本处理</h2>
      <h3>4.1 问题</h3>
      <p>本案例要求使用sed工具来完成下列任务操作：</p>
      <ul class="list">
        <li>修改主机名配置文件
</li>
        <li>修改hosts文件，添加两条映射记录：192.168.4.5 与 svr5.tarena.com、svr5，还有119.75.217.56与www.baidu.com
</li>
      </ul>
      <h3>4.2 方案</h3>
      <p># sed  [选项]  '条件指令'  文件..</p>
      <p>sed工具的多行文本处理操作：</p>
      <ul class="list">
        <li>i： 在指定的行之前插入文本
</li>
        <li>a：在指定的行之后追加文本
</li>
        <li>c：替换指定的行
</li>
      </ul>
      <h3>4.3 步骤</h3>
      <p>基本语法格式案例：</p>
      <p>注意：系统默认没有a.txt文件，需要自己创建一个测试文件！！！</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_string">'2a XX'</span>   a<span class="sh_symbol">.</span>txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//在第二行后面，追加XX</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_string">'2i XX'</span>   a<span class="sh_symbol">.</span>txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//在第二行前面，插入XX</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_string">'2c XX'</span>   a<span class="sh_symbol">.</span>txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//将第二行替换为XX</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed  '2a XX'   a.txt			//在第二行后面，追加XX<font></font>
[root@svr5 ~]# sed  '2i XX'   a.txt			//在第二行前面，插入XX<font></font>
[root@svr5 ~]# sed  '2c XX'   a.txt			//将第二行替换为XX<font></font>
</pre></div></div>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：修改主机名配置文件</p>
      <p>1）确认修改前的配置</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># <span class="sh_normal">cat </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>hostname</li><li>svr5<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>com</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# cat /etc/hostname<font></font>
svr5.tarena.com<font></font>
</pre></div></div>
      <p>2）使用sed修改主机名配置所在行的内容（c整行替换）</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_string">'1c mysvr.tarena.com'</span> <span class="sh_regexp">/etc/</span>hostname </li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed  '1c mysvr.tarena.com' /etc/hostname 
</pre></div></div>
      <p class="number">步骤二：修改hosts文件，添加新的记录</p>
      <p>1）确认修改前的配置</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># <span class="sh_normal">cat </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>hosts</li><li><span class="sh_number">127.0.0.1</span>   localhost localhost<span class="sh_symbol">.</span>localdomain localhost4 localhost4<span class="sh_symbol">.</span>localdomain4</li><li><span class="sh_symbol">::</span><span class="sh_number">1</span>         localhost localhost<span class="sh_symbol">.</span>localdomain localhost6 localhost6<span class="sh_symbol">.</span>localdomain6</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# cat /etc/hosts<font></font>
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4<font></font>
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6<font></font>
</pre></div></div>
      <p>2）使用sed修改hosts文件，添加两行新纪录（a追加）</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201904/SHELL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># sed  <span class="sh_symbol">-</span>i  <span class="sh_string">'$a 192.168.4.5  svr5.tarena.com svr5'</span>  <span class="sh_regexp">/etc/</span>hosts</li><li><span class="sh_number">127.0.0.1</span>   localhost localhost<span class="sh_symbol">.</span>localdomain localhost4 localhost4<span class="sh_symbol">.</span>localdomain4</li><li><span class="sh_symbol">::</span><span class="sh_number">1</span>         localhost localhost<span class="sh_symbol">.</span>localdomain localhost6 localhost6<span class="sh_symbol">.</span>localdomain6</li><li><span class="sh_number">192.168.4.5</span>  svr5<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>com svr5</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# sed  -i  '$a 192.168.4.5  svr5.tarena.com svr5'  /etc/hosts<font></font>
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4<font></font>
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6<font></font>
192.168.4.5  svr5.tarena.com svr5<font></font>
</pre></div></div>
    </div>
  <script charset="utf-8" async="true" src="./CASE_files/jquery.min2.js"></script><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./CASE_files/translate_24dp.png" width="20" height="20" alt="Google 翻译"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">原文</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">提供更好的翻译建议</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>
<div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>